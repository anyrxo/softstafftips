window.onload = function() {
  const apiUrl = 'https://gist.githubusercontent.com/xsirenmedia/ba691cca7192cf40ceddad1b2ededfea/raw/9e37397b3727df47992772f70113681b773545ac/gistfile1.txt';

  async function fetchTips() {
    try {
      console.log('Fetching tips from GitHub Gist...');
      const response = await fetch(apiUrl);

      if (!response.ok) {
        throw new Error(`HTTP error! Status: ${response.status}`);
      }

      const text = await response.text();
      const tips = JSON.parse(text);
      console.log('Fetched tips:', tips);

      if (!Array.isArray(tips) || tips.length === 0) {
        console.error('No valid tips found.');
        return;
      }

      startScrolling(tips);
    } catch (error) {
      console.error('Failed to load tips:', error);
    }
  }

  function startScrolling(tips) {
    const container = document.getElementById('scroll-container');

    function addRandomMessage() {
      const randomTip = tips[Math.floor(Math.random() * tips.length)];
      const messageDiv = document.createElement('div');
      messageDiv.className = 'scroll-message';
      messageDiv.innerHTML = `
        <div>
          <strong>${randomTip.title}</strong>: ${randomTip.description}
        </div>
      `;
      container.appendChild(messageDiv);

      // Remove message after animation ends
      setTimeout(() => {
        container.removeChild(messageDiv);
      }, 4000);
    }

    setInterval(() => {
      addRandomMessage();
    }, 4000);
  }

  fetchTips();
};
